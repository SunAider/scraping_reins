{% extends "base.html" %}
{% block head %}
<title>不動産情報取得</title>
{% endblock %}
{% block style %}
{% endblock %}
{% block content %}
<div class="container">
	<div class="jumbotron">
		<h1 class="text-center display-4">REINSサイトからの不動産情報取得</h1>
	</div>
	<div class="row justify-content-center align-items-center">
		<div class="col-sm-6 ">
			<form id="contactForm" action="/mapData" method="POST" onsubmit="return submitForm();">{% csrf_token %}
				{{ contactForm.as_p }}
				<input type="submit" name="contact-submit" style="display:none;" id="submit" class="btn btn-primary" />
			</form>
		</div>
	</div>
	<div id="loading-icon" style="display: none;" class="loading">
		<!-- Include your loading icon here -->
		Loading...
	</div>
</div>
<style>
	/* Absolute Center Spinner */
	.loading {
		position: fixed;
		z-index: 999;
		height: 2em;
		width: 2em;
		overflow: visible;
		margin: auto;
		top: 0;
		left: 0;
		bottom: 0;
		right: 0;
	}

	/* Transparent Overlay */
	.loading:before {
		content: '';
		display: block;
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background-color: rgba(0, 0, 0, 0.3);
	}

	/* :not(:required) hides these rules from IE9 and below */
	.loading:not(:required) {
		/* hide "loading..." text */
		font: 0/0 a;
		color: transparent;
		text-shadow: none;
		background-color: transparent;
		border: 0;
	}

	.loading:not(:required):after {
		content: '';
		display: block;
		font-size: 10px;
		width: 1em;
		height: 1em;
		margin-top: -0.5em;
		-webkit-animation: spinner 1500ms infinite linear;
		-moz-animation: spinner 1500ms infinite linear;
		-ms-animation: spinner 1500ms infinite linear;
		-o-animation: spinner 1500ms infinite linear;
		animation: spinner 1500ms infinite linear;
		border-radius: 0.5em;
		-webkit-box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.5) -1.5em 0 0 0, rgba(0, 0, 0, 0.5) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
		box-shadow: rgba(0, 0, 0, 0.75) 1.5em 0 0 0, rgba(0, 0, 0, 0.75) 1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) 0 1.5em 0 0, rgba(0, 0, 0, 0.75) -1.1em 1.1em 0 0, rgba(0, 0, 0, 0.75) -1.5em 0 0 0, rgba(0, 0, 0, 0.75) -1.1em -1.1em 0 0, rgba(0, 0, 0, 0.75) 0 -1.5em 0 0, rgba(0, 0, 0, 0.75) 1.1em -1.1em 0 0;
	}

	/* Animation */

	@-webkit-keyframes spinner {
		0% {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(360deg);
			-moz-transform: rotate(360deg);
			-ms-transform: rotate(360deg);
			-o-transform: rotate(360deg);
			transform: rotate(360deg);
		}
	}

	@-moz-keyframes spinner {
		0% {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(360deg);
			-moz-transform: rotate(360deg);
			-ms-transform: rotate(360deg);
			-o-transform: rotate(360deg);
			transform: rotate(360deg);
		}
	}

	@-o-keyframes spinner {
		0% {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(360deg);
			-moz-transform: rotate(360deg);
			-ms-transform: rotate(360deg);
			-o-transform: rotate(360deg);
			transform: rotate(360deg);
		}
	}

	@keyframes spinner {
		0% {
			-webkit-transform: rotate(0deg);
			-moz-transform: rotate(0deg);
			-ms-transform: rotate(0deg);
			-o-transform: rotate(0deg);
			transform: rotate(0deg);
		}

		100% {
			-webkit-transform: rotate(360deg);
			-moz-transform: rotate(360deg);
			-ms-transform: rotate(360deg);
			-o-transform: rotate(360deg);
			transform: rotate(360deg);
		}
	}
	#id_etc_multi li {
        list-style: none; /* Remove default list item marker */
        margin-bottom: 10px; /* Adjust margin between items */
    }

    #id_etc_multi label {
        display: flex; 
        align-items: center; /* Vertically center the checkbox and label */
		flex-direction: row;
        cursor: pointer; /* Set cursor to pointer for better UX */
    }

    #id_etc_multi input {
		width: 10%;
        margin-left: 5px; /* Adjust margin between checkbox and label */
    }
</style>
{% endblock %}
{% block script %}
<!-- <script src="sample.js"></script> -->
<script type="text/javascript">

	// Show loading icon when a link is clicked
	function showLoadingIcon() {
		console.log("loading icon 1")
		document.getElementById('loading-icon').style.display = 'block';
	}
	function submitForm() {
		showLoadingIcon();
		console.log("sbumit clicked");
		document.getElementById('contactForm').submit();
		return false;
	}
	// Hide loading icon when the page has finished loading
	window.onload = function () {
		document.getElementById('loading-icon').style.display = 'none';
	};

	$(document).ready(function () {


		$("#submit").hide();
		var res = "{{data}}"
		if (res == "500OverError") {
			alert("検索結果が500件を超えています。検索条件入力画面に戻ります。")
			window.location.href = '/'
		} else if (res == "loginError") {
			alert("ログイン情報が正しくありません。");
			window.location.href = '/'
		} else if (res == "Error") {
			alert("ただいまREINSサービス提供を停止しております。");
			window.location.href = '/'
		} else {
			$("#submit").show();
		}
		// $("#contactForm").submit(function (e) {
		// e.preventDefault();
		// 	var serializedData = $(this).serialize();
		// 	console.log("formData", serializedData);
		// 	$.ajax({
		// 		type: 'POST',
		// 		url: "{% url 'contact_submit' %}",
		// 		data: serializedData,
		// 		success: function (response) {
		// 			// $("#contactForm")[0].reset();
		// 			var result = response.success
		// 			console.log(result)
		// 			if (result == "500OverError") {
		// 				alert("500 OVer Error!");
		// 			} else if (result == "loginError") {
		// 				alert("Login Error!");
		// 			} else {
		// 				console.log(result);
		// 				window.location.href = "/map?data=" + (result);
		// 			}
		// 			// const resultObj = JSON.parse(response)
		// 			// result = response.succeess
		// 			var stringsArray = result.split(',');
		// 			console.log(stringsArray);
		// 		},
		// 		error: function (response) {
		// 			console.log(response)
		// 		}
		// 	})
		// })
	})
</script>
{% endblock %}